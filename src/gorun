#!/bin/bash

echo "DIRs"
find . -type d  | wc -l
echo "FILEs"
find . -type f  | wc -l
echo "LINEs"
find . -name "*.go" |xargs cat|grep -v ^$|wc -l
echo "DETAILs"
find . -type f -name "*.go" | xargs wc -l | sort -n

go fmt *.go
go fmt ./agent/*.go
go fmt ./data/*.go
go fmt ./peer/*.go
#sed -i 's/\t/    /g' *.go
find . -type f -name "*.go"|xargs sed -i 's/\t/    /g'

rm -f h5keeper

go build -o h5keeper utils.go proposer.go acceptor.go agent.go cmdaction.go reply.go data.go jtloc.go main.go net.go node.go

#go tool pprof h5keeper --cpuprofile=h5keeper.prof
#go tool pprof h5keeper h5keeper.prof
#./h5keeper --cpuprofile=h5keeper.prof

./h5keeper

